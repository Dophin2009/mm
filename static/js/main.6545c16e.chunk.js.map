{"version":3,"sources":["internal/notemap.js","internal/Fn.js","internal/Expr.js","internal/MathFunction.js","components/EquationBox.js","assets/delete.png","demos/index.js","demos/i.js","demos/ii.js","demos/iii.js","components/EquationBar.js","assets/add.png","assets/update.png","internal/abc.js","components/Sheet.js","internal/Player.js","components/Rhs.js","assets/play.png","assets/stop.png","App.js","reportWebVitals.js","index.js"],"names":["isWhite","Fn","fn","this","compiled","math","eval","error","t","evaluate","r","map","Expr","expr","MathFunction","start","end","step","str","stop","i","push","range","duration","whiteonly","values","v","valToNote","val","midi","Math","round","HIGH_MIDI","offset","idx","toMidiWhiteKeys","Note","EquationBox","label","registerEqu","registerStart","registerEnd","registerStep","registerStartBeat","registerDuration","registerWhiteOnly","remove","className","placeholder","type","onClick","src","alt","defaultValue","value","demos","name","equations","startBeat","DemoButtons","setValue","buttons","EquationBar","handleSubmit","useForm","defaultValues","control","register","wrapSubmit","getValues","formState","errors","useFieldArray","fields","append","items","eq","num","required","validate","setValueAs","parseInt","onSubmit","getLetter","durationToLength","Map","midiToLetter","add","get","renderSheet","id","title","bpm","notes","abcjs","renderAbc","data","midiMap","has16","note","undefined","set","keys","Array","from","sort","a","b","li","cur","mlen","key","generateSheet","Sheet","titleStr","useEffect","len","Player","ac","AudioContext","piano","nodes","Soundfont","instrument","soundfont","delay","init","sDuration","currentTime","startTime","durationTime","node","PlayButton","handlePlay","handleStop","BpmSlider","handleChange","min","max","onChange","event","target","TitleField","Rhs","player","useState","setBpm","setTitle","playAudio","play","stopAudio","App","setNotes","mfs","mf","flatMap","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6545c16e.chunk.js","sourcesContent":["import React from \"react\";\nimport { isDOMComponent } from \"react-dom/test-utils\";\n\n// NOTE the midi scale goes from 21 to 108\nconst LOW_MIDI = 36;\nconst HIGH_MIDI = 84;\nconst RANGE = HIGH_MIDI - LOW_MIDI + 1;\n\nfunction toMidiSimple(val) {\n    return (Math.round(val) % RANGE) + LOW_MIDI + 24;\n}\n\nconst isWhite = [1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1];\nfunction toMidiWhiteKeys(val) {\n    const WRANGE = 7*4+1;\n    let offset = Math.round(val)%RANGE;\n    let idx = 60;\n    while (offset >= 0) {\n        idx++;\n        if (isWhite[idx%12]===0) idx++;\n        offset--;\n    }\n    while (offset < 0) {\n        idx--;\n        if (isWhite[idx%12]===0) idx--;\n        offset++;\n    }\n    return idx;\n}\n\n\nexport { toMidiSimple, toMidiWhiteKeys };\n","import * as math from \"mathjs\";\n\nclass Fn {\n    constructor(fn) {\n        this.compiled = math.compile(fn);\n    }\n\n    verify() {\n        try {\n            this.eval(0);\n            return true;\n        } catch (error) {\n            return false;\n        }\n    }\n\n    eval(t) {\n        return this.compiled.evaluate({ t: t });\n    }\n\n    evalRange(r) {\n        return r.map((t) => this.compiled.evaluate(t));\n    }\n}\n\nexport default Fn;\n","import * as math from \"mathjs\";\n\nclass Expr {\n    constructor(expr) {\n        this.expr = expr;\n    }\n\n    eval() {\n        try {\n            return math.evaluate(this.expr);\n        } catch {\n            return undefined;\n        }\n    }\n}\n\nexport default Expr;\n","import { toMidiSimple, toMidiWhiteKeys } from \"./notemap\";\nimport Fn from \"./Fn\";\nimport Expr from \"./Expr\";\n\nclass MathFunction {\n    constructor(fn, start, end, step) {\n        this.str = fn;\n        this.fn = new Fn(fn);\n        this.start = new Expr(start).eval();\n        this.end = new Expr(end).eval();\n        this.step = new Expr(step).eval();\n    }\n\n    values() {\n        const r = range(this.start, this.end, this.step);\n        return r.map((t) => [t, this.fn.eval(t)]);\n    }\n\n    // generates sheet music from\n    // abc(bpm, n16, values) {}\n\n    // Generates whole sequence of notes from start to end with duration step.\n    notes(start, duration, whiteonly) {\n        const values = this.values();\n        return values.map(([, v], i) =>\n            this.valToNote(v, start + i * duration, duration, whiteonly)\n        );\n    }\n\n    valToNote(v, start, duration, whiteonly) {\n        let midi = toMidiSimple(v);\n        if (whiteonly) {\n            midi = toMidiWhiteKeys(v);\n        }\n        return Note(midi, start, duration);\n    }\n}\n\nfunction Note(midi, start, duration) {\n    return { midi: midi, start: start, duration: duration };\n}\n\nfunction range(start, stop, step = 1) {\n    let r = [];\n    for (let i = start; i < stop; i += step) {\n        r.push(i);\n    }\n    return r;\n}\n\nexport default MathFunction;\n","import React from \"react\";\n\nimport deleteIcon from \"../assets/delete.png\";\n\nfunction EquationBox({\n    label,\n    registerEqu,\n    registerStart,\n    registerEnd,\n    registerStep,\n    registerStartBeat,\n    registerDuration,\n    registerWhiteOnly,\n    remove,\n}) {\n    return (\n        <div className=\"w-full border-t-2 py-2 flex flex-col\">\n            <div className=\"w-full flex flex-row\">\n                <div className=\"w-3/4 text-lg font-bold flex flex-start\">\n                    f(t) =\n                    <input\n                        {...registerEqu()}\n                        placeholder=\"...\"\n                        label={label}\n                        className=\"h-7 bottom-0 mx-2 w-52 focus:outline-none\"\n                    />\n                </div>\n                <div className=\"w-1/4 flex flex-row justify-end gap-2\">\n                    <button\n                        type=\"submit\"\n                        className=\"bg-gray-200 text-black-500 font-bold opacity-60 hover:opacity-100 px-2 py-2 rounded-md\"\n                        onClick={() => remove()}\n                    >\n                        <img\n                            src={deleteIcon}\n                            alt=\"Delete\"\n                            className=\"w-4 h-4\"\n                        />\n                    </button>\n                </div>\n            </div>\n            <div className=\"w-full flex flex-row\">\n                <div className=\"text-lg font-bold flex flex-start w-1/5\">\n                    S:\n                    <input\n                        className=\"h-7 bottom-0 ml-1 focus:outline-none\"\n                        defaultValue=\"1\"\n                        {...registerStart()}\n                    />\n                </div>\n                <div className=\"text-lg font-bold flex flex-start w-1/5\">\n                    E:\n                    <input\n                        className=\"h-7 bottom-0 ml-1 focus:outline-none\"\n                        defaultValue=\"10\"\n                        {...registerEnd()}\n                    />\n                </div>\n                <div className=\"text-lg font-bold flex flex-start w-1/5\">\n                    ST:\n                    <input\n                        className=\"h-7 bottom-0 ml-1 focus:outline-none\"\n                        defaultValue=\"1\"\n                        {...registerStep()}\n                    />\n                </div>\n            </div>\n            <div className=\"w-full flex flex-row\">\n                <div className=\"text-lg font-bold flex flex-start w-1/5\">\n                    SB:\n                    <input\n                        className=\"h-7 bottom-0 ml-1 focus:outline-none\"\n                        defaultValue=\"0\"\n                        {...registerStartBeat()}\n                    />\n                </div>\n                <div className=\"text-lg font-bold flex flex-start w-1/5\">\n                    D:\n                    <select\n                        className=\"h-7 bottom-0 ml-1 focus:outline-none\"\n                        defaultValue=\"2\"\n                        {...registerDuration()}\n                    >\n                        <option value={1}>1</option>\n                        <option value={2}>2</option>\n                        <option value={4}>4</option>\n                        <option value={8}>8</option>\n                        <option value={16}>16</option>\n                    </select>\n                </div>\n                <div className=\"text-lg font-bold flex flex-start w-1/5\">\n                    WO:\n                    <input\n                        type=\"checkbox\"\n                        className=\"h-7 bottom-0 ml-1 focus:outline-none\"\n                        value={false}\n                        {...registerWhiteOnly()}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default EquationBox;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAAYklEQVRYw+3VsQ3AIAxE0duDYZnGo0HFDmSBSNgGUkT/06J7Eg0S0TdVzZdT785vETN5AM4B/+j68wC4gVP3AAAAAAAAAHJAC335LQ5YCLA4UDTc80NFyhCmvhzvstw8kbcHgDjepK6bn4cAAAAASUVORK5CYII=\"","import i from \"./i.js\";\nimport ii from \"./ii.js\";\nimport iii from \"./iii.js\";\n\nconst demos = [i, ii, iii];\n\nexport default demos;\n","export default {\n    name: \"I\",\n    equations: [\n        {\n            str: \"0\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 8,\n            whiteonly: true,\n        },\n        {\n            str: \"2 + t%2\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 8,\n            whiteonly: true,\n        },\n        {\n            str: \"-3\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 8,\n            whiteonly: true,\n        },\n        {\n            str: \"(2*t)%8\",\n            start: \"0\",\n            end: \"16\",\n            step: \"1\",\n            duration: 2,\n            startBeat: 32,\n            whiteonly: true,\n        },\n        {\n            str: \"t^2 %8\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 64,\n            whiteonly: true,\n        },\n        {\n            str: \"t^3 %8\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 96,\n            whiteonly: true,\n        },\n        {\n            str: \"(t^2 + 1) %8\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 128,\n            whiteonly: true,\n        },\n        {\n            str: \"(t^3 + 1) %8\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 160,\n            whiteonly: true,\n        },\n        {\n            str: \"(t^5) %8\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 192,\n            whiteonly: true,\n        },\n        {\n            str: \"(t^5 + 1) %8\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 224,\n            whiteonly: true,\n        },\n        {\n            str: \"t^2 %8\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 256,\n            whiteonly: true,\n        },\n        {\n            str: \"t^3 %8\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 256,\n            whiteonly: true,\n        },\n    ],\n};\n","export default {\n    name: \"II\",\n    equations: [\n        {\n            str: \"6 + sin(t * pi/2)\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 8,\n            startBeat: 0,\n            whiteonly: true,\n        },\n        {\n            str: \"2\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 8,\n            startBeat: 0,\n            whiteonly: true,\n        },\n        {\n            str: \"-3 + sin(t * pi/2)\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 8,\n            startBeat: 0,\n            whiteonly: true,\n        },\n        {\n            str: \"(t^2 + t)%8\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 32,\n            whiteonly: true,\n        },\n        {\n            str: \"(t^3 + 2*t) % 16\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 64,\n            whiteonly: true,\n        },\n        {\n            str: \"(t^2) % 8\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 96,\n            whiteonly: true,\n        },\n        {\n            str: \"(t^5 + 4*t^3) % 10\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 128,\n            whiteonly: true,\n        },\n        {\n            str: \"(4*sin(t * pi/2) + t^2) % 11\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 160,\n            whiteonly: true,\n        },\n        {\n            str: \"(7*t^2) % 13\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 192,\n            whiteonly: true,\n        },\n        {\n            str: \"(3*t^3) % 14\",\n            start: \"0\",\n            end: \"32\",\n            step: \"1\",\n            duration: 1,\n            startBeat: 224,\n            whiteonly: true,\n        },\n    ],\n};\n","export default {\n    name: \"III\",\n    equations: [\n        {\n            str: \"-12cos(pi * t/2) + 27\",\n            start: 0,\n            end: 49,\n            step: 1,\n            startBeat: 0,\n            duration: 1,\n            whiteonly: false,\n        },\n        {\n            str: \"3\",\n            start: 1,\n            end: 2,\n            step: 1,\n            startBeat: 4,\n            duration: 2,\n            whiteonly: false,\n        },\n        {\n            str: \"15\",\n            start: 1,\n            end: 3,\n            step: 1,\n            startBeat: 6,\n            duration: 2,\n            whiteonly: false,\n        },\n        {\n            str: \"15 - 2t\",\n            start: 0,\n            end: 3,\n            step: 1,\n            startBeat: 8,\n            duration: 2,\n        },\n        {\n            str: \"11.4 - 1.6t\",\n            start: 0,\n            end: 3,\n            step: 1,\n            startBeat: 14,\n            duration: 2,\n            whiteonly: false,\n        },\n        {\n            str: \"6.6 + 1.5t\",\n            start: 0,\n            end: 3,\n            step: 1,\n            startBeat: 20,\n            duration: 2,\n            whiteonly: false,\n        },\n        {\n            str: \"3\",\n            start: 0,\n            end: 2,\n            step: 1,\n            startBeat: 26,\n            duration: 2,\n            whiteonly: false,\n        },\n        {\n            str: \"t^3/6-t^2-t/6+4\",\n            start: 0,\n            end: 4,\n            step: 1,\n            startBeat: 30,\n            duration: 2,\n            whiteonly: false,\n        },\n        {\n            str: \"-0.6-1.6t\",\n            start: 0,\n            end: 3,\n            step: 1,\n            startBeat: 38,\n            duration: 2,\n            whiteonly: false,\n        },\n        {\n            str: \"-5.4 + 1.5t\",\n            start: 0,\n            end: 3,\n            step: 1,\n            startBeat: 44,\n            duration: 2,\n            whiteonly: false,\n        },\n    ],\n};\n","import React from \"react\";\nimport { useFieldArray, useForm } from \"react-hook-form\";\n\nimport Expr from \"../internal/Expr\";\nimport EquationBox from \"./EquationBox\";\nimport newIcon from \"../assets/add.png\";\nimport updateIcon from \"../assets/update.png\";\nimport demos from \"../demos\";\n\nfunction EquationBar({ handleSubmit }) {\n    const {\n        control,\n        register,\n        handleSubmit: wrapSubmit,\n        setValue,\n        getValues,\n        formState: { errors },\n    } = useForm({\n        defaultValues: {},\n    });\n    const { fields, append, remove } = useFieldArray({\n        control,\n        name: \"equations\",\n    });\n\n    const items = fields.map((eq, idx) => {\n        const num = idx + 1;\n        const name = `equations.${idx}`;\n\n        return (\n            <EquationBox\n                key={num}\n                label={num}\n                registerEqu={() =>\n                    register(`${name}.str`, {\n                        required: \"A valid equation is required!\",\n                    })\n                }\n                registerStart={() =>\n                    register(`${name}.start`, {\n                        required: \"Start is required!\",\n                    })\n                }\n                registerEnd={() =>\n                    register(`${name}.end`, {\n                        required: \"End is required!\",\n                        validate: (val) => {\n                            const { equations } = getValues();\n                            const start = equations[idx].start;\n                            return (\n                                new Expr(val).eval() > new Expr(start).eval() ||\n                                \"End must be greater than start!\"\n                            );\n                        },\n                    })\n                }\n                registerStep={() =>\n                    register(`${name}.step`, {\n                        required: \"Step is required!\",\n                        validate: (val) =>\n                            new Expr(val).eval() > 0 ||\n                            \"Step must be greater than 0\",\n                    })\n                }\n                registerStartBeat={() =>\n                    register(`${name}.startBeat`, {\n                        required: true,\n                        setValueAs: (val) => parseInt(val),\n                    })\n                }\n                registerDuration={() =>\n                    register(`${name}.duration`, {\n                        required: true,\n                        setValueAs: (val) => parseInt(val),\n                    })\n                }\n                registerWhiteOnly={() => register(`${name}.whiteonly`)}\n                remove={() => remove(idx)}\n            />\n        );\n    });\n\n    return (\n        <div className=\"w-full\">\n            <form onSubmit={wrapSubmit(handleSubmit)}>\n                <div className=\"w-full flex flex-row\">\n                    <div className=\"w-1/2 text-lg font-bold flex flex-start\">\n                        Equations\n                    </div>\n                    <div className=\"w-1/2 flex flex-row justify-end gap-2\">\n                        <DemoButtons demos={demos} setValue={setValue} />\n                        <button\n                            type=\"button\"\n                            onClick={() => append({ str: \"\" })}\n                            className=\"bg-gray-200 text-black-500 font-bold opacity-60 hover:opacity-100 px-2 py-2 rounded-md\"\n                        >\n                            <img src={newIcon} alt=\"+\" className=\"w-4 h-4\" />\n                        </button>\n                        <button\n                            type=\"submit\"\n                            className=\"bg-gray-200 text-black-500 font-bold opacity-60 hover:opacity-100 px-2 py-2 rounded-md\"\n                        >\n                            <img\n                                src={updateIcon}\n                                alt=\"Update\"\n                                className=\"w-4 h-4\"\n                            />\n                        </button>\n                    </div>\n                </div>\n\n                <div className=\"py-2\" />\n                {items}\n            </form>\n        </div>\n    );\n}\n\nfunction DemoButtons({ demos, setValue }) {\n    const buttons = demos.map(({ name, equations }, i) => {\n        const useDemo = () => {\n            setValue(\"equations\", equations);\n        };\n\n        return (\n            <button\n                key={i}\n                type=\"button\"\n                className=\"text-xs bg-gray-200 text-black-500 opacity-60 hover:opacity-100 px-2 py-2 rounded-md\"\n                onClick={() => useDemo()}\n            >\n                D-{name}\n            </button>\n        );\n    });\n    return <>{buttons}</>;\n}\n\nexport default EquationBar;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAANElEQVRYw+3SwQkAQAgDQftvWj9XwSEiOJsC5pMISdfKNwAAAJgA8nOAPsBNAQDAZkDSzgo1fM8xWMDdPAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAB30lEQVRYw+1XsWoCQRB9RLFSoiApU0nwE2KsNGWq67VNFwJpAy7kA4JfYLCNfkAsjkOS64KdIAZinSqg6QQvhePeqnu3uxc1zb1r5ObNm3NuZmcOiBHjMMihjhYcjDHDDGM4aKGOXACbmYlbsDGHJ7nmsGFJ5D198TJcqbR4veFiQ14zQAJNpfjqekRCkNcKkEVvTWIAhioKSCONAi7BMFizv+CYy3s68kPBuYOilFVEV2B9Cb+VyfGffoJSKLeET0nKFPBz30de+W/zcMwClAX5lFY5PJgFcHly8lryzCxFFlEW0txvuzNp2YbAJkpXat10ZwF9EXLmzOn5ixoBWGDjBaLG2wrKACykswPRJkJDI0AkrCq6sq8AI5I421eAKUlk/jfANY6k1gzZp39NkYd3nEusZ2QdRX/JV/jgnf6Ekw1rhWxO9DIFUrjHD7G+cYukYGvQ/Xb0RlviFM88Wa/C/dWMq0U/KnxUaebdCPNtQbtGLvphJyKJO/Rp2APg49NWbUFhx3XY6FyQp6Wimg6c5dickJers2yZjswU+tynrONgOvR9+abuTmeytkw4tye88h0tXh2BNUTWpCrCV8fq1urYM5M3XX6b+skxX99dvcrZ3QfIAT6hYsTYMX4B5nX0NzNC5FsAAAAASUVORK5CYII=\"","import abcjs from \"abcjs\";\n// notes: midi, start (index of 16th notes), duration (how many 16th notes it lasts)\n\nconst getLetter = [\n    \"C\",\n    \"^C\",\n    \"D\",\n    \"^D\",\n    \"E\",\n    \"F\",\n    \"^F\",\n    \"G\",\n    \"^G\",\n    \"A\",\n    \"^A\",\n    \"B\",\n];\nconst durationToLength = new Map([\n    [1, \"/4\"],\n    [2, \"/2\"],\n    [4, \"\"],\n    [8, \"2\"],\n    [16, \"4\"],\n]);\nfunction midiToLetter(midi, duration) {\n    let add = \"\";\n    while (midi < 60) {\n        midi += 12;\n        add += \",\";\n    }\n    while (midi >= 72) {\n        midi -= 12;\n        add += \"'\";\n    }\n\n    return getLetter[midi - 60] + add + durationToLength.get(duration);\n}\n\nexport function generateSheet(title, bpm, notes) {\n    let data =\n        \"T: \" +\n        title +\n        \"\\n\" +\n        \"M:4/4\\n\" +\n        \"L:1/4\\n\" +\n        \"Q:1/4=\" +\n        bpm +\n        \"\\n\" +\n        \"K:C\\n\";\n\n    let midiMap = new Map();\n    let has16 = false;\n    for (const note of notes) {\n        if (note.duration === 1) has16 = true;\n        if (midiMap.get(note.start) === undefined) midiMap.set(note.start, \"\");\n        midiMap.set(\n            note.start,\n            midiMap.get(note.start) + midiToLetter(note.midi, note.duration)\n        );\n    }\n    let keys = Array.from(midiMap.keys());\n    keys.sort((a, b) => a - b);\n    let li = 0;\n    let cur = \"\";\n    const mlen = has16 === true ? 32 : 64;\n    for (const key of keys) {\n        if (key >= li + 16) {\n            data += cur + \" | \";\n            cur = \"\";\n            li += 16;\n            if (li % mlen === 0) data += \"\\n\";\n        }\n        cur += \"[\" + midiMap.get(key) + \"] \";\n    }\n    data += cur + \"|\\n\";\n\n    return data;\n}\n\nexport function renderSheet(id, title, bpm, notes) {\n    abcjs.renderAbc(id, generateSheet(title, bpm, notes));\n}\n","import React, { useEffect } from \"react\";\nimport { renderSheet } from \"../internal/abc\";\n\nfunction Sheet({ title, bpm, notes }) {\n    let titleStr = title;\n    if (title === \"\") {\n        titleStr = \"Untitled Masterpiece\";\n    }\n    useEffect(() => {\n        if (notes.len !== 0) {\n            renderSheet(\"paper\", titleStr, bpm, notes);\n        }\n    });\n    return <div className=\"w-full flex flex-col items-center\" id=\"paper\"></div>;\n}\n\nexport default Sheet;\n","import Soundfont from \"soundfont-player\";\n\nclass Player {\n    constructor() {\n        this.ac = new AudioContext();\n        this.piano = undefined;\n\n        this.nodes = [];\n    }\n\n    async init() {\n        this.piano = await Soundfont.instrument(\n            this.ac,\n            \"acoustic_grand_piano\",\n            {\n                soundfont: \"SalC5Light2\",\n            }\n        );\n    }\n\n    async play(notes, bpm, delay) {\n        if (!this.piano) {\n            await this.init();\n        }\n\n        await this.stop();\n\n        const sDuration = 15 / bpm;\n        const currentTime = this.ac.currentTime;\n        for (const { midi, start, duration } of notes) {\n            const startTime = currentTime + delay + start * sDuration;\n            const durationTime = duration * sDuration;\n\n            const node = this.piano.start(midi, startTime, {\n                duration: durationTime,\n            });\n            this.nodes.push(node);\n        }\n    }\n\n    async stop() {\n        this.piano.stop();\n        this.nodes = [];\n    }\n}\n\nexport default Player;\n","import React, { useState } from \"react\";\n\nimport playIcon from \"../assets/play.png\";\nimport stopIcon from \"../assets/stop.png\";\nimport Sheet from \"./Sheet\";\nimport Player from \"../internal/Player\";\n\nfunction Rhs({ notes }) {\n    const player = new Player();\n\n    const [bpm, setBpm] = useState(100);\n    const [title, setTitle] = useState(\"\");\n\n    const playAudio = async () => await player.play(notes, bpm, 1);\n    const stopAudio = async () => await player.stop();\n\n    return (\n        <>\n            <div className=\"relative w-full flex flex-row\">\n                <PlayButton\n                    handlePlay={() => playAudio()}\n                    handleStop={() => stopAudio()}\n                />\n                <BpmSlider handleChange={(val) => setBpm(val)} />\n                <TitleField handleChange={(val) => setTitle(val)} />\n            </div>\n            <div className=\"relative w-full flex flex-row\">\n                <Sheet title={title} bpm={bpm} notes={notes} />\n            </div>\n        </>\n    );\n}\n\nfunction PlayButton({ handlePlay, handleStop }) {\n    let className =\n        \"bg-gray-200 text-black-500 font-bold opacity-60 hover:opacity-100 px-2 py-2 rounded-md left-0 top-0 mr-1\";\n\n    return (\n        <div className=\"text-lg font-bold flex flex-start mr-3\">\n            <button className={className} onClick={() => handlePlay()}>\n                <img src={playIcon} alt=\"Play\" className=\"w-4 h-4\" />\n            </button>\n            <button className={className} onClick={() => handleStop()}>\n                <img src={stopIcon} alt=\"Stop\" className=\"w-4 h-4\" />\n            </button>\n        </div>\n    );\n}\n\nfunction BpmSlider({ handleChange }) {\n    const onChange = (event) => handleChange(event.target.value);\n\n    return (\n        <div className=\"text-lg font-bold flex flex-start\">\n            BPM:\n            <input\n                type=\"number\"\n                className=\"h-7 bottom-0 w-12 mx-2 focus:outline-none\"\n                min={1}\n                max={300}\n                defaultValue={100}\n                onChange={(event) => onChange(event)}\n            />\n        </div>\n    );\n}\n\nfunction TitleField({ handleChange }) {\n    const onChange = (event) => handleChange(event.target.value);\n\n    return (\n        <div className=\"text-lg font-bold flex flex-start\">\n            Title:\n            <input\n                placeholder=\"...\"\n                className=\"h-7 bottom-0 w-40 mx-2 focus:outline-none\"\n                onChange={(event) => onChange(event)}\n            />\n        </div>\n    );\n}\n\nexport default Rhs;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAAw0lEQVRYw+3WsQnCABCF4d8Uae2FDCCOIA5h4wwW7hBwCHEKC2eQjCAOINiKXQo9q+ChlvdU8N4A+SB5uTvIZDL/kA0DLWCcmdNTAoaxY6gFjJaaUgkYxp6xFjCurOgrAcM4MlUAa24OCSxv90iYcHBEWHkfAJQsaR0SUl4PAIxoHBFQ3mcAChZc4sr7CgBUbKPK+x4AmHGKKO+XAOkrEn9kaU3FP5p4VMiHnXxcf2ThSFemeOlLzxbx4SU/HTOZzO/nDvgk7Cl5QqbGAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAAMklEQVRYhe3VQQoAAARFQfe/NGdQFDXzt+otRQBcls0J7AWm7gQEBAQEfgfWH44AwAEFvp4+0NsXbXoAAAAASUVORK5CYII=\"","import React, { useState } from \"react\";\n\nimport MathFunction from \"./internal/MathFunction\";\nimport EquationBar from \"./components/EquationBar\";\nimport Rhs from \"./components/Rhs\";\nimport \"./App.css\";\n\nfunction App() {\n    const [notes, setNotes] = useState([]);\n    const handleSubmit = async ({ equations }) => {\n        const mfs = equations.map((eq) => ({\n            mf: new MathFunction(eq.str, eq.start, eq.end, eq.step),\n            startBeat: eq.startBeat,\n            duration: eq.duration,\n            whiteonly: eq.whiteonly || eq.whiteonly === \"false\",\n        }));\n        const notes = mfs.flatMap(({ mf, startBeat, duration, whiteonly }) => {\n            const notes = mf.notes(startBeat, duration, whiteonly);\n            return notes;\n        });\n        setNotes(notes);\n    };\n\n    return (\n        <div className=\"w-full min-h-screen\">\n            <div className=\"w-full h-12 p-2 flex items-center shadow-md\">\n                <div className=\"text-medium font-bold\">Musical Math</div>\n            </div>\n\n            <div className=\"w-full h-full flex flex-row\">\n                <div className=\"w-1/3 border-r-2 p-2\">\n                    <EquationBar handleSubmit={(data) => handleSubmit(data)} />\n                </div>\n                <div className=\"w-2/3 p-2\">\n                    <Rhs notes={notes} />\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"@fontsource/roboto/300.css\";\nimport \"@fontsource/roboto/400.css\";\nimport \"@fontsource/roboto/500.css\";\nimport \"@fontsource/roboto/700.css\";\n\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}